# ============================================================================
# PostgreSQL Database Configuration
# ============================================================================
# Copy this file to .env and update with your actual values
# IMPORTANT: Never commit .env to version control!

# Database connection settings
POSTGRES_DB=rag_assistant
POSTGRES_USER=rag_user
POSTGRES_PASSWORD=your_secure_password_here_change_me

# Port mapping (default: 5432)
# Change this if you already have PostgreSQL running locally
POSTGRES_PORT=5432

# ============================================================================
# PgAdmin Configuration (optional - for database management UI)
# ============================================================================
# To enable PgAdmin, run: docker-compose --profile admin up -d

PGADMIN_PORT=5050
PGADMIN_EMAIL=admin@example.com
PGADMIN_PASSWORD=admin_password_change_me

# ============================================================================
# Application Configuration
# ============================================================================

# Database connection string format for your application:
# postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@localhost:${POSTGRES_PORT}/${POSTGRES_DB}

# Example connection strings for different libraries:
# - Python (psycopg2): postgresql://rag_user:your_password@localhost:5432/rag_assistant
# - Python (SQLAlchemy): postgresql+psycopg2://rag_user:your_password@localhost:5432/rag_assistant
# - Node.js (pg): postgresql://rag_user:your_password@localhost:5432/rag_assistant

# ============================================================================
# OpenAI API Configuration (for embedding generation)
# ============================================================================

OPENAI_API_KEY=your_openai_api_key_here
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_EMBEDDING_DIMENSION=1536

# ============================================================================
# Vector Search Configuration
# ============================================================================

# Default number of results to return in similarity searches
DEFAULT_MATCH_COUNT=10

# Minimum similarity threshold (0.0 to 1.0)
# Lower values = more results but potentially less relevant
DEFAULT_MATCH_THRESHOLD=0.7

# HNSW search parameter (controls recall vs speed tradeoff)
# Higher values = better recall but slower queries
# Default: 40, Recommended range: 40-200
HNSW_EF_SEARCH=40

# ============================================================================
# Document Processing Configuration
# ============================================================================

# Maximum chunk size in tokens (for text splitting)
MAX_CHUNK_SIZE=512

# Chunk overlap in tokens (to preserve context between chunks)
CHUNK_OVERLAP=50

# Supported document types
SUPPORTED_DOCUMENT_TYPES=pdf,docx,txt,md,html

# ============================================================================
# Data Retention Configuration
# ============================================================================

# Number of days to keep search history
SEARCH_HISTORY_RETENTION_DAYS=90

# ============================================================================
# Performance Tuning
# ============================================================================

# PostgreSQL connection pool settings (adjust based on your application)
DB_POOL_MIN_SIZE=2
DB_POOL_MAX_SIZE=10

# Query timeout in seconds
QUERY_TIMEOUT_SECONDS=60

# ============================================================================
# Security Notes
# ============================================================================
#
# 1. Generate strong passwords:
#    - Use at least 16 characters
#    - Mix uppercase, lowercase, numbers, and special characters
#    - Use a password manager or generator
#
# 2. Restrict network access:
#    - In production, don't expose PostgreSQL port publicly
#    - Use firewall rules to limit access
#    - Consider using PostgreSQL's pg_hba.conf for authentication
#
# 3. Enable SSL/TLS:
#    - In production, enable SSL connections
#    - Update connection strings with sslmode=require
#
# 4. Regular backups:
#    - Set up automated backups of postgres-data volume
#    - Test restore procedures regularly
#
# 5. Monitor access:
#    - Review PostgreSQL logs regularly
#    - Set up alerts for suspicious activity
#
# ============================================================================
